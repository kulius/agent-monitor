# Agent Monitor

> Tauri æ¡Œé¢æ‡‰ç”¨ â€” åƒç´ é¢¨è™›æ“¬è¾¦å…¬å®¤ï¼Œè®“æ¯å€‹çµ‚ç«¯æ©Ÿè®Šæˆæœƒå‹•çš„å°å“¡å·¥ï¼Œå³æ™‚é¡¯ç¤º Claude Code å·¥ä½œç‹€æ…‹ã€‚

![Tauri](https://img.shields.io/badge/Tauri-2.0-blue?logo=tauri)
![Vue](https://img.shields.io/badge/Vue-3.5-42b883?logo=vuedotjs)
![TypeScript](https://img.shields.io/badge/TypeScript-5.6-3178c6?logo=typescript)
![Rust](https://img.shields.io/badge/Rust-Backend-orange?logo=rust)
![License](https://img.shields.io/badge/License-MIT-green)

## åŠŸèƒ½ç‰¹è‰²

- **Terminal å¤šåˆ†é ** â€” å…§å»º xterm.js çµ‚ç«¯æ©Ÿï¼Œæ”¯æ´å¤šåˆ†é åˆ‡æ›ã€å„²å­˜/é‚„åŸ tab é…ç½®
- **åƒç´ é¢¨ Worker Bar** â€” æ¯å€‹ terminal å°æ‡‰ä¸€å€‹åƒç´ å°äººï¼Œé€éå‹•ç•«å³æ™‚åæ˜  Claude ç‹€æ…‹ï¼ˆidle / working / waiting / completedï¼‰
- **Claude ç‹€æ…‹åµæ¸¬** â€” è‡ªå‹•è§£æçµ‚ç«¯æ©Ÿè¼¸å‡ºï¼Œè¾¨è­˜ Claude Code çš„å·¥ä½œéšæ®µä¸¦è§¸ç™¼å°æ‡‰å‹•ç•«èˆ‡éŸ³æ•ˆ
- **File Explorer** â€” å¯æ”¶åˆå´é‚Šæ¬„ï¼Œæ”¯æ´æ¨¹ç‹€ç€è¦½ã€éš±è—æª”åˆ‡æ›ã€LRU å¿«å–
- **èƒŒæ™¯æœå‹™ç®¡ç†** â€” ç¨ç«‹ç®¡ç† Odoo serverã€cloudflared ç­‰é•·é§æœå‹™ï¼Œä¸å ç”¨ terminal tab
- **Agent ç›£æ§é¢æ¿** â€” é€é WebSocket é€£ç·š IPC Serverï¼Œå³æ™‚è¿½è¹¤ agent åŸ·è¡Œç‹€æ…‹èˆ‡æ­·å²ç´€éŒ„
- **System Tray** â€” æœ€å°åŒ–è‡³ç³»çµ±åŒ£ï¼Œå¸¸é§æ¡Œé¢

## UI ä½ˆå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– Agent Monitor              [ğŸ“] [ğŸ“Š]        â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§‘â€ğŸ’»  ğŸ§‘â€ğŸ’»  ğŸ§‘â€ğŸ’»  ğŸ§‘â€ğŸ’»                                   â”‚  â† Worker Barï¼ˆåƒç´ å°äººåˆ—ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚ Tab1 | Tab2 | Tab3           [+] [ğŸ’¾]    â”‚  â† Terminal Tabs
â”‚ File â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  Ex  â”‚â”‚                                         â”‚â”‚
â”‚ plor â”‚â”‚           xterm.js Terminal              â”‚â”‚  â† Terminal Pane
â”‚  er  â”‚â”‚                                         â”‚â”‚
â”‚      â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¼ Agent Panel  [Status] [Services]              â”‚  â† å¯æ”¶åˆé¢æ¿
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Running Agents / Stats / History           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€è¡“æ£§

| å±¤ç´š | æŠ€è¡“ | ç”¨é€” |
|------|------|------|
| Framework | Tauri 2.0 | æ¡Œé¢æ‡‰ç”¨æ¡†æ¶ï¼ˆRust backendï¼‰ |
| Frontend | Vue 3.5 + TypeScript | UI æ¡†æ¶ |
| State | Pinia 3 | ç‹€æ…‹ç®¡ç† |
| Terminal | xterm.js 6 | çµ‚ç«¯æ©Ÿæ¨¡æ“¬å™¨ |
| PTY | portable-pty 0.9 | å½çµ‚ç«¯ï¼ˆRustï¼‰ |
| IPC | Tauri Events + WebSocket | é›™é€šé“é€šè¨Š |
| Utilities | @vueuse/core 14 | Vue composables |

## å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- **Node.js** 18+
- **Rust** (stable)
- **pnpm**
- Windows 10/11

### å®‰è£èˆ‡å•Ÿå‹•

```bash
# å®‰è£ä¾è³´
pnpm install

# é–‹ç™¼æ¨¡å¼ï¼ˆTauri + Vite hot reloadï¼‰
pnpm tauri dev

# åƒ…å‰ç«¯é–‹ç™¼ï¼ˆä¸å•Ÿå‹• Tauri backendï¼‰
pnpm dev

# å»ºç½® release
pnpm tauri build
# ç”¢å‡º: src-tauri/target/release/agent-monitor.exe
```

## å°ˆæ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ App.vue                  # ä¸»ä½ˆå±€
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ TerminalPane.vue     # xterm.js + lazy init + ç‹€æ…‹åµæ¸¬
â”‚   â”œâ”€â”€ TerminalTabs.vue     # åˆ†é åˆ— + å„²å­˜/é‚„åŸ
â”‚   â”œâ”€â”€ WorkerBar.vue        # åƒç´ å“¡å·¥åˆ—
â”‚   â”œâ”€â”€ MiniWorker.vue       # ç¸®å°ç‰ˆåƒç´ å°äºº (80x90px)
â”‚   â”œâ”€â”€ OfficeWorker.vue     # å®Œæ•´ç‰ˆåƒç´ å°äºº (120x140px)
â”‚   â”œâ”€â”€ AvatarPicker.vue     # é ­åƒé¸æ“‡å™¨
â”‚   â”œâ”€â”€ FileExplorer.vue     # æª”æ¡ˆç¸½ç®¡å´é‚Šæ¬„
â”‚   â”œâ”€â”€ FileTreeNode.vue     # æ¨¹ç‹€ç¯€é»
â”‚   â”œâ”€â”€ ServicePanel.vue     # èƒŒæ™¯æœå‹™é¢æ¿
â”‚   â”œâ”€â”€ ServiceEditor.vue    # æœå‹™ç·¨è¼¯å™¨
â”‚   â”œâ”€â”€ StatusPanel.vue      # Agent åŸ·è¡Œç‹€æ…‹
â”‚   â”œâ”€â”€ StatsPanel.vue       # Agent çµ±è¨ˆ
â”‚   â”œâ”€â”€ HistoryList.vue      # åŸ·è¡Œæ­·å²
â”‚   â””â”€â”€ SettingsBar.vue      # è¨­å®šåˆ—
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ terminal.ts          # Terminal ç‹€æ…‹ + Tauri IPC
â”‚   â”œâ”€â”€ service.ts           # æœå‹™ç®¡ç†
â”‚   â”œâ”€â”€ fileExplorer.ts      # æª”æ¡ˆç¸½ç®¡ç‹€æ…‹
â”‚   â”œâ”€â”€ monitor.ts           # WebSocket IPC client
â”‚   â””â”€â”€ savedTabs.ts         # Tab æŒä¹…åŒ–
â””â”€â”€ utils/
    â”œâ”€â”€ sounds.ts            # éŸ³æ•ˆç³»çµ±
    â””â”€â”€ ansi.ts              # ANSI åºåˆ—æ¸…é™¤

src-tauri/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # Windows å…¥å£
â”‚   â”œâ”€â”€ lib.rs               # Tauri è¨­å®š + tray icon
â”‚   â””â”€â”€ terminal.rs          # PTY ç®¡ç†ï¼ˆparking_lot::Mutexï¼‰
â”œâ”€â”€ Cargo.toml
â””â”€â”€ tauri.conf.json
```

## æ¶æ§‹èªªæ˜

### è³‡æ–™æµ

```
Vue Frontend (port 1420)
  TerminalTabs â†’ TerminalPane â†’ xterm.js
        â†•                â†•
  Pinia Stores â†â†’ invoke() / listen()
        â†•
Rust Backend (Tauri)
  TerminalManager â†’ portable-pty â†’ PowerShell
        â†“ emit()
  Events: terminal-output, terminal-closed
```

### é›™é€šé“ IPC

| é€šé“ | ç”¨é€” | æ©Ÿåˆ¶ |
|------|------|------|
| **Tauri IPC** | Terminal â†” PTY é€šè¨Š | `invoke()` é€æŒ‡ä»¤ã€`listen()` æ”¶äº‹ä»¶ |
| **WebSocket** | Agent ç›£æ§ | é€£ç·š `ws://localhost:9527` è¿½è¹¤ agent ç‹€æ…‹ |

### Claude ç‹€æ…‹åµæ¸¬

Terminal è¼¸å‡ºç¶“ ANSI æ¸…é™¤å¾Œï¼Œä»¥ pattern matching åˆ¤æ–·ç‹€æ…‹ï¼š

| ç‹€æ…‹ | è§¸ç™¼æ¢ä»¶ | Worker å‹•ç•« |
|------|---------|------------|
| `idle` | 15 ç§’ç„¡è¼¸å‡º | ä¸Šä¸‹æµ®å‹• |
| `working` | åµæ¸¬åˆ°è™•ç†ä¸­é—œéµå­— | æ‰“å­—å‹•ç•« + è¢å¹•é–ƒçˆ |
| `waiting` | å‡ºç¾ `?`ã€`[Y/n]` ç­‰æç¤º | èˆ‰æ‰‹ + "Help!" æ³¡æ³¡ |
| `completed` | å‡ºç¾å®Œæˆé—œéµå­— | ç«‹æ­£ + "å ±å‘Š!! å·²å®Œæˆ" æ³¡æ³¡ |

## å¿«æ·éµ

| å¿«æ·éµ | åŠŸèƒ½ |
|--------|------|
| `Ctrl + B` | åˆ‡æ› File Explorer |

## License

MIT
